version: 1.0
runtime: python3.9

source:
  type: git
  repository: 
    url: https://github.com/khaisarsgithub/DjangoAppRunnerTest
    branch: main

build:
  commands:
    install:
      - sudo apt install -y python3 python3-pip virtualenv
      - python3 -m venv venv
      - source venv/bin/activate
      - pip install -r requirements.txt
      
    build:
      - python manage.py collectstatic --noinput
      - python manage.py migrate

run:
  command: gunicorn DjangoAppRunnerTest.wsgi:application --bind 0.0.0.0:8000

instance_configuration:
  cpu: 1024
  memory: 2048

network_configuration:
  ingress_configuration:
    is_publicly_accessible: true

service:
  name: DjangoAppRunnerTest
  health_check:
    path: /healthz
